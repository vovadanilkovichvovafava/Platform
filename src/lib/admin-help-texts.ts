// ─────────────────────────────────────────────────────────────────────────────
// Единый словарь help-текстов для админских страниц
// Все пояснения к контролам и легенды хранятся здесь (DRY, single source of truth)
// ─────────────────────────────────────────────────────────────────────────────

export interface HelpHint {
  shortHint: string
  longHint?: string
  examples?: string[]
}

export interface LegendSection {
  title: string
  description: string
  details?: string[]
}

export interface PageLegend {
  heading: string
  sections: LegendSection[]
}

// ─────────────────────────────────────────────────────────────────────────────
// Inline hints for specific controls (InfoHint icon tooltips)
// ─────────────────────────────────────────────────────────────────────────────

export const adminHelpHints = {
  // ── /admin/content page ───────────────────────────────────────────────────
  content: {
    neuralParser: {
      shortHint:
        "AI-парсер использует нейросеть для распознавания структуры. Лучше для PDF/DOC, но медленнее обычного парсера.",
      longHint:
        "При включении файл отправляется в AI для анализа структуры документа. Рекомендуется для сложных PDF/DOC/DOCX файлов. Для простых .txt/.md быстрее использовать обычный парсер.",
      examples: [
        "PDF с таблицами — включите AI",
        "Простой .md — выключите для скорости",
      ],
    },
    trailPublished: {
      shortHint:
        "Скрытый trail не отображается студентам на платформе, но доступен для редактирования.",
    },
    trailPasswordProtected: {
      shortHint:
        "Trail с паролем требует ввод пароля от всех пользователей, кроме создателя.",
    },
    trailTeacherVisibility: {
      shortHint:
        "Определяет, какие учителя видят работы студентов по этому trail.",
    },
    bulkSelect: {
      shortHint:
        "Выберите несколько модулей для массовых действий (удаление). Изменения применяются после подтверждения.",
    },
    dragReorder: {
      shortHint:
        "Перетащите модуль за иконку захвата для изменения порядка внутри trail.",
    },
    importContent: {
      shortHint:
        "Импорт создаёт новый trail с модулями из файла. Существующий контент не будет затронут.",
    },
    exportContent: {
      shortHint:
        "Экспорт скачивает trail и его модули в текстовом формате для бэкапа или переноса.",
    },
  },

  // ── /admin/access?tab=teachers ────────────────────────────────────────────
  teachers: {
    dragAssign: {
      shortHint:
        "Перетащите учителя на trail для назначения. Изменения не сохраняются автоматически — нажмите «Подтвердить».",
    },
    teacherNoAssignment: {
      shortHint:
        "Учитель без назначений видит работы всех студентов по всем trails.",
    },
    pendingChanges: {
      shortHint:
        "Несохранённые изменения подсвечены. Нажмите «Подтвердить» для сохранения или «Сбросить» для отмены.",
    },
  },

  // ── /admin/access?tab=student-access ──────────────────────────────────────
  studentAccess: {
    trailPublished: {
      shortHint:
        "Если trail не опубликован (Черновик), студенты не видят его независимо от других настроек.",
    },
    trailRestricted: {
      shortHint:
        "Ограниченный trail виден только студентам из списка доступа. Публичный — виден всем.",
      longHint:
        "При включении ограничения trail исчезает для всех студентов, кроме явно добавленных. Используйте для приватных программ или тестирования.",
    },
    trailPasswordProtection: {
      shortHint:
        "Пароль — дополнительный барьер. Студент должен ввести пароль при первом входе в trail.",
      longHint:
        "Пароль может использоваться совместно с ограничением доступа. Только создатель trail может управлять паролем.",
    },
    grantAccess: {
      shortHint:
        "Выберите студента и ограниченный trail, чтобы дать индивидуальный доступ.",
    },
    revokeAccess: {
      shortHint:
        "После отзыва доступа студент перестаёт видеть trail. Прогресс сохраняется.",
    },
  },

  // ── /admin/access?tab=admin-access ────────────────────────────────────────
  adminAccess: {
    coAdminTrails: {
      shortHint:
        "CO_ADMIN видит только отмеченные trails. Без назначений — не видит ничего (deny-by-default).",
    },
    selectAll: {
      shortHint:
        "Выдать доступ ко всем trails. Новые trails не добавляются автоматически — требуется ручное назначение.",
    },
    adminOnlyTab: {
      shortHint:
        "Только пользователи с ролью ADMIN могут управлять доступом со-админов.",
    },
  },
} as const

// ─────────────────────────────────────────────────────────────────────────────
// Page-level legends (collapsible "Как это работает" sections)
// ─────────────────────────────────────────────────────────────────────────────

export const adminPageLegends: Record<string, PageLegend> = {
  content: {
    heading: "Как устроено управление контентом",
    sections: [
      {
        title: "Структура контента",
        description:
          "Контент организован в Trail (направления) и Module (модули). Каждый trail содержит модули трёх типов: Теория, Практика и Проект.",
        details: [
          "Trail — учебное направление со своей темой и набором модулей",
          "Модуль — единица контента с теорией, вопросами или проектным заданием",
          "Порядок модулей определяет последовательность прохождения",
        ],
      },
      {
        title: "Импорт и экспорт",
        description:
          "Импорт позволяет создать trail из файла (.txt, .md, .json, .pdf, .doc). Экспорт — скачать контент для бэкапа.",
        details: [
          "AI-парсер лучше справляется со сложными документами (PDF, DOC)",
          "Импорт создаёт новый trail — существующие не затрагиваются",
          "Экспорт доступен как для одного trail, так и для всего контента",
        ],
      },
      {
        title: "Видимость и доступ",
        description:
          "Trail может быть опубликован или скрыт. Дополнительно можно ограничить доступ по студентам или защитить паролем.",
        details: [
          "Скрытый trail — не виден студентам, но редактируется",
          "Ограниченный trail — виден только указанным студентам",
          "Пароль — дополнительная защита при первом входе",
        ],
      },
    ],
  },
  teachers: {
    heading: "Как работает назначение учителей",
    sections: [
      {
        title: "Что это",
        description:
          "Назначение определяет, работы каких trails видит учитель в своей панели проверки.",
      },
      {
        title: "Когда использовать",
        description:
          "Если несколько учителей работают с разными направлениями и каждый должен видеть только свои.",
        details: [
          "Учитель без назначений видит все работы",
          "Назначенный учитель видит только работы выбранных trails",
        ],
      },
      {
        title: "Что будет после изменения",
        description:
          "Изменения вступают в силу после нажатия «Подтвердить». До сохранения можно отменить все правки кнопкой «Сбросить».",
      },
    ],
  },
  studentAccess: {
    heading: "Как работает доступ студентов",
    sections: [
      {
        title: "Что это",
        description:
          "Управление видимостью trails для студентов: публикация, ограничение доступа и защита паролем.",
      },
      {
        title: "Приоритеты настроек",
        description:
          "Настройки работают по принципу каскада: сначала публикация, затем ограничение, затем пароль.",
        details: [
          "Не опубликован → не виден никому из студентов",
          "Ограничен → виден только студентам из списка доступа",
          "Пароль → студент должен ввести пароль при первом входе",
          "Таргетно приглашённые студенты ВСЕГДА видят trail — все слайдеры, кроме Пароля, игнорируют их",
        ],
      },
      {
        title: "Что будет после включения ограничения",
        description:
          "Trail исчезнет для всех студентов, кроме тех, кому вы явно дали доступ через форму ниже. Прогресс существующих студентов сохраняется.",
      },
    ],
  },
  adminAccess: {
    heading: "Как работает доступ со-админов",
    sections: [
      {
        title: "Что это",
        description:
          "Управление тем, какие trails видит и может редактировать каждый со-админ (CO_ADMIN).",
      },
      {
        title: "Принцип deny-by-default",
        description:
          "По умолчанию со-админ не видит ни одного trail. Доступ выдаётся вручную.",
        details: [
          "ADMIN — полный доступ ко всем trails без ограничений",
          "CO_ADMIN — доступ только к назначенным trails",
          "При создании trail со-админом — доступ назначается автоматически",
        ],
      },
      {
        title: "Что будет после сохранения",
        description:
          "Со-админ сразу увидит/потеряет доступ к trails. Контент, созданный со-админом в ранее доступных trails, не удаляется.",
      },
    ],
  },
}
